<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <title id="title">bee.fish</title>
      <script src="/head.js"></script>
      <script src="/error.js"></script>
      <script src="/client/stream/stream.js"></script>
      <script src="/client/power-encoding/power-encoding.js"></script>
      <script src="/client/id/id.js"></script>
      <script src="/client/evaluate.js"></script>      <script src="/client/logon/authentication.js"></script>
      <script src="/client/punycode.js"></script>
      <link rel="stylesheet" type="text/css" href="style.css"/>
   </head>
   <body>

      <a id="logoff">Logoff/Change secret</a>
      <h1 id="hostnameHeader"></h1>
    
      <script>
setup();

go();

function go() {
    
   var path =
      document.location.origin +
      "/" +
      decodeURIComponent(
         document.location.search.substr(1)
      );

   fetch(path).
   then(
      function(response) {
         return response.text()
      }
   ).
   then(
      function(text) {
         // document.write(text);
         return JSON.parse(text);
      }
   ).
   then(
      function(json) {
         json = evaluate(json);
      }
   );
}

function setup() {   var hostname =
      punycode.toUnicode(
         document.location.hostname
      );

   var title =
      document.getElementById("title");

   var hostnameHeader =
      document.getElementById("hostnameHeader");
      
   title.innerText = hostname;
   hostnameHeader.innerText = hostname;
   
   
   var logoff =
      document.getElementById("logoff");
   
   logoff.href = 
      "/client/logon/?redirect=" +
      encodeURIComponent(document.location.href);
}
      </script>

   </body>

</html>