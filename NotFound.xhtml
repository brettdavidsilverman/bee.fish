<?xml version="1.0" ?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
   <head>
      <meta charset="utf-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <title>bee.fish</title>
      <script>
window.onerror =
function (message, source, lineno, colno, error)
{

   
   if (!error)
      error = {}

   var stack = "";
   if (error.stack)
      stack = String(error.stack);

   if (message instanceof Object)
      message = JSON.stringify(message, null, "   ");
   
   var string = 
      [
         message,
         source,
         "line: " + lineno,
         "col: " + colno,
         stack
      ].join("\n");
      
   if (alert.silent)
      console.log(string);
   else
      alert(string);
   
};

      </script>
   </head>
   <body>
      <h1 id="h1">bee.fish <span id="path"></span> page not taken yet</h1>
      <form onsubmit="return false;">
         <label for="jsonText">JSON Text</label><br />
         <textarea id="jsonText">{"üêù":"üåé"}</textarea><br />
         <button onclick="postJSON()">Submit</button>
      </form><br />

      <a href="https://github.com/brettdavidsilverman/bee.fish">Bee.Fish on Git Hub</a>

      <script>
var path =
   document.getElementById("path");

path.innerText = decodeURI(document.location.pathname);

var jsonText =
   document.getElementById("jsonText");

function postJSON() {

   try {
      eval( "(" + jsonText.value + ")");
   }
   catch (error) {
       alert(error);
       return;
   }
   
   var response =
      fetch(
         window.location.href,
         {
            method: "POST",
            body: jsonText.value
         }
      ).then(
         function (response) {
            return response.json();
         }
      ).then(
         function (json) {
            window.location.reload();
         }
      ).catch(
         function(error) {
            alert(error);
         }
      );

   return response;
}

      </script>

   </body>
</html>
